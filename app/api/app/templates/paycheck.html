{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-bold mb-1">Paycheck Report</h1>
<div class="text-sm text-slate-500 mb-4">Filter by Pay Date (Friday). Delivered deals only in this v1.</div>

<form class="flex gap-2 items-end mb-4" method="get" action="/reports/paycheck">
  <div>
    <label class="text-xs text-slate-500">Start</label>
    <input type="date" class="border rounded px-3 py-2" name="start" value="{{ start }}">
  </div>
  <div>
    <label class="text-xs text-slate-500">End</label>
    <input type="date" class="border rounded px-3 py-2" name="end" value="{{ end }}">
  </div>
  <button class="px-3 py-2 rounded bg-slate-900 text-white">Run</button>
</form>

<div class="bg-white rounded border border-slate-200 overflow-x-auto">
<table class="min-w-full text-sm">
  <thead class="bg-slate-900 text-white">
    <tr>
      <th class="text-left p-2">Pay Date</th>
      <th class="text-left p-2">Delivered</th>
      <th class="text-left p-2">Customer</th>
      <th class="text-left p-2">Model</th>
      <th class="text-right p-2">Total</th>
    </tr>
  </thead>
  <tbody>
    {% for d in deals %}
      <tr class="border-t">
        <td class="p-2">{{ d.pay_date or "" }}</td>
        <td class="p-2">{{ d.delivered_date or "" }}</td>
        <td class="p-2">{{ d.customer }}</td>
        <td class="p-2">{{ d.model }}</td>
        <td class="p-2 text-right">${{ "{:,.0f}".format(d.total_deal_comm or 0) }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>

<div class="mt-4 text-right text-lg font-bold">Total: ${{ "{:,.0f}".format(total) }}</div>
{% endblock %}
